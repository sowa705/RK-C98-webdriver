(function(){"use strict";const a=new Array,i=new Date,o=180;let t=!1;self.addEventListener("message",e=>{if(e.data==="start")console.log("Communication start loop...."),n();else if(e.data==="report")t=!1;else{let s=e.data;a.splice(0,0,s)}});function n(){setInterval(()=>{const e=new Date;let s=e.getTime()-i.getTime();if(s>o&&(t=!1),!t){if(a.length>0){let l=a.pop();l!=null&&(self.postMessage(l),i.setTime(e.getTime()))}else s>1e3&&(self.postMessage("heartbeat"),i.setTime(e.getTime()));t=!0}},20)}})();
